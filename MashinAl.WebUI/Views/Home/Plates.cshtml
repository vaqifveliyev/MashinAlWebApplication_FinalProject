
@{
    ViewBag.Title = "Qeydiyyat Nişanları | Maşın Elanları Və Qiymətləri | Mashin.AL";
}


<section class="section section-license-search">
    <div class="container">
        <div class="license-search-container">
            <div class="mark-icon">
                <img src="~/frontside/assets/img/icons/registrationMarks_icons.svg" alt="">
            </div>
            <form id="license-search-form" action="@Url.Action("PlateSearchAction", "Home")" method="post">
                @await Component.InvokeAsync("FilterRegion")
                <select name="FirstLetter" id="letter-select-1" class="select-container">
                    <option selected disabled></option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                    <option value="G">G</option>
                    <option value="H">H</option>
                    <option value="J">J</option>
                    <option value="K">K</option>
                    <option value="L">L</option>
                    <option value="M">M</option>
                    <option value="N">N</option>
                    <option value="O">O</option>
                    <option value="P">P</option>
                    <option value="R">R</option>
                    <option value="S">S</option>
                    <option value="T">T</option>
                    <option value="U">U</option>
                    <option value="V">V</option>
                    <option value="X">X</option>
                    <option value="Y">Y</option>
                    <option value="Z">Z</option>
                </select>
                <select name="SecondLetter" id="letter-select-2" class="select-container">
                    <option selected disabled></option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                    <option value="G">G</option>
                    <option value="H">H</option>
                    <option value="J">J</option>
                    <option value="K">K</option>
                    <option value="L">L</option>
                    <option value="M">M</option>
                    <option value="N">N</option>
                    <option value="O">O</option>
                    <option value="P">P</option>
                    <option value="R">R</option>
                    <option value="S">S</option>
                    <option value="T">T</option>
                    <option value="U">U</option>
                    <option value="V">V</option>
                    <option value="X">X</option>
                    <option value="Y">Y</option>
                    <option value="Z">Z</option>
                </select>
                <input type="text" name="PlateNumber" class="select-container" id="select-numbers" maxlength="3">
                <button type="submit" class="submit-button"><i class="fa-solid fa-magnifying-glass"></i></button>
            </form>
        </div>
        <section class="section">
            <div class="section-header">
                <h1>Elanlar</h1>
            </div>
            <div class="section-body">
                <div class="loading-container">
                    <div class="loading-circle"></div>
                    Məlumatlar yüklənir...
                </div>
                <div class="section-card-row">
                    <partial name="_Plates" model="@Model" />
                </div>
            </div>
        </section>
    </div>
</section>


@section breadcrumbs {
    <section class="section breadcrumbs-section">
        <div class="container">
            <div class="breadcrumbs">
                <a asp-controller="home" asp-action="index">Əsas</a>
                <a asp-controller="home" asp-action="licenseplates">Qeydiyyat Nişanları</a>
            </div>
        </div>
    </section>
}


@section addjs {
    <script>
        $(document).ready(function () {
            $('#license-search-form').submit(function (e) {
                e.preventDefault();

                var formData = $(this).serialize();

                // Show loader within the .section-card-row
                showPreloader();

                $.ajax({
                    type: "POST",
                    url: "@Url.Action("PlateSearchAction", "Home")",
                    data: formData,
                    success: function (result) {
                        
                        setTimeout(function () {
             
                            if (result.trim() === "") {
                                $('.section-card-row').html('<h3 style="background-color: #f8d7da; color: #721c24; border-color: #f5c6cb; padding: 15px; border: 1px solid; border-radius: 4px; font-size: 14px; width: 100%;">Axtarışınıza uyğun nəticə tapılmadı!</h3>');
                            } else {
                                $('.section-card-row').html(result);
                            }

      
                            hidePreloader();
                        }, 1000);
                    },
                    error: function (error) {
                        console.log(error);

 
                        hidePreloader();
                    }
                });
            });

            function showPreloader() {
                $(".loading-container").show();
                $(".section-card-row").hide(); 
            }


            function hidePreloader() {
                $(".loading-container").hide();
                $(".section-card-row").show();
            }

            $(".loading-container").hide();
            $(".section-card-row").show();
        });
    </script>
}


@section addcss {
    <style>
        .loading-container {
            display: none;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            column-gap: 10px;
        }

        .loading-circle {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f81734;
            border-radius: 50%;
            border-top: 2px solid transparent;
            animation: spin 1s linear infinite;
        }

        @@keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
}
